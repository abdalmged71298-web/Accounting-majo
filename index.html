  const loginForm = document.getElementById('loginForm');
  const protectedContent = document.getElementById('protectedContent');
  const userEl = document.getElementById('user');
  const pwdEl = document.getElementById('pwd');
  const loginBtn = document.getElementById('loginBtn');
  const logoutBtn = document.getElementById('logoutBtn');
  const errorMsg = document.getElementById('errorMsg');

  document.addEventListener('DOMContentLoaded', () => {
    protectedContent.classList.add('hidden');
    loginForm.classList.remove('hidden');
  });

  function tryLogin() {
    const name = (userEl.value || '').trim();
    const code = (pwdEl.value || '').trim();

    if (name && users[name] && users[name] === code) {
      loginForm.classList.add('hidden');
      protectedContent.classList.remove('hidden');

      userEl.value = '';
      pwdEl.value = '';
      errorMsg.textContent = '';
    } else {
      errorMsg.textContent = "المعرف أو الرمز غير صحيح";
      pwdEl.value = '';
      pwdEl.focus();
    }
  }

  logoutBtn.addEventListener('click', () => {
    protectedContent.classList.add('hidden');
    loginForm.classList.remove('hidden');
    userEl.focus();
  });

  loginBtn.addEventListener('click', tryLogin);
  userEl.addEventListener('keydown', e => { if (e.key === 'Enter') tryLogin(); });
  pwdEl.addEventListener('keydown', e => { if (e.key === 'Enter') tryLogin(); });
</script>
